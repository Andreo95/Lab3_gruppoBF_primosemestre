\section{Amplificatore di carica}

\begin{figure}[h]
	\centering
	\includegraphics{charge-detector.pdf}
	\caption{Circuito rilevatore di carica.}
	\label{f:circ_detq}
\end{figure}

\begin{table}[h]
	\centering
	\begin{tabular}{S S S S}
		{$C_T$ [\si{\nano\farad}]} & {$C_F$ [\si{\nano\farad}]} & {$R_1$ [\si{\kohm}]} \\
		\midrule
		1.06(7)	&	1.04 (7)	&	98.5(9) \\
	\end{tabular}
	\caption{Valori misurati per i componenti del circuito.}
	\label{t:det_meas}
\end{table}

Si è montato il circuito in \fig{circ_detq}, dove lo scopo del generatore di onde quadre $V_S$, insieme al condensatore $C_T$, è di iniettare nel nostro circuito una carica (che rappresenti ad esempio il segnale di un detector).

Il funzionamento che ci attendiamo, ammettendo l'idealità del generatore, dell'OpAmp e dei condensatori, è il seguente: al fronte di salita (o discesa) di $V_S$ una carica $\Delta V_S C_T$ si deposita sul condensatore $C_F$, portando dunque la tensione $V_{sh}$ a $\Delta V_S \frac{C_T}{C_F}$. La scarica del condensatore attraverso $R_1$ fa sì che la carica su di esso, e quindi la tensione $V_{sh}$, decadano esponenzialmente con un tempo caratteristico $\tau = C_F / R_1$. L'OpAmp $X_2$, configurato come discriminatore con una tensione di soglia positiva (poco inferiore ai \SI{200}{\mV}), ha nel tempo in cui $V_{sh}$ è minore di tale soglia un'uscita $V_{discr}$ negativa ($\approx V_{EE}$); ai fronti di discesa di $V_S$ dunque non ci aspettiamo nessuna variazione dell'output (poichè $V_{sh}$ scende sotto lo 0), mentre ai fronti di salita dovremmo vedere $V_{discr}$ salire a $\approx V_{CC}$ e rimanerci fintantoché $V_{sh}$ non scenda, per lo scaricarsi del condensatore $C_F$, nuovamente al di sotto della tensione di soglia. La \fig{det_norm} riporta i segnali $V_{sh}$ e $V_{discr}$, e si può vedere come le nostre attese siano almeno qualitativamente rispettate.

\begin{figure}[h]
	\begin{subfigure}{0.5 \textwidth}
		\centering
		\includegraphics[scale=0.7]{detector.png}
		\caption{Più periodi dell'onda in ingresso.}
	\end{subfigure}
	\begin{subfigure}{0.5 \textwidth}
		\centering
		\includegraphics[scale=0.7]{detector_zoom.png}
		\caption{Dettaglio di un singolo evento di rilevazione.}
	\end{subfigure}
	\caption{Andamento di $V_{sh}$ e $V_{discr}$.}
	\label{f:det_norm}
\end{figure}

Si è dunque proceduto a inviare al circuito onde quadre di diversa ampiezza, registrando il corrispondente Time Over Threshold, ovvero la durata del segnale alto di $V_{discr}$

vth = 0.1862 \pm 0.0028
ChiSquare = 3.08 (5 DoF, p = 0.6875)
